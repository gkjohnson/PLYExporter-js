<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="./node_modules/three/build/three.min.js"></script>
    <script type="text/javascript" src="./node_modules/three/examples/js/loaders/PLYLoader.js"></script>
    <script type="text/javascript" src="./PLYExporter.js"></script>



    <title></title>
</head>
<body>


    <script type="text/javascript">
        // https://stackoverflow.com/questions/19327749/javascript-blob-filename-without-link
        var saveData = (function () {
            var a = document.createElement("a");
            document.body.appendChild(a);
            a.style = "display: none";
            return function (data, fileName) {
                var blob = new Blob([data], {type: "octet/stream"}),
                    url = window.URL.createObjectURL(blob);
                a.href = url;
                a.download = fileName;
                a.click();
                window.URL.revokeObjectURL(url);
            };
        }());

        // create the geometry
        var geometry = new THREE.SphereBufferGeometry( 5, 10, 10 );
        var material = new THREE.MeshBasicMaterial( {color: 0xffff00} );
        var mesh = new THREE.Mesh( geometry, material );

        // process into the file content
        var exp = new THREE.PLYExporter();
        var data = exp.parse(mesh);

        console.log(data);

        // parse it back to geometry
        var loader = new THREE.PLYLoader();
        var res = loader.parse(data);

        console.log(res, geometry);

        // saveData(data, 'sphere.ply');
        
    </script>
</body>
</html>